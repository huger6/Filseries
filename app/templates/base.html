<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filseries{% block title %}{% endblock %}</title>

    <!-- Meta tags -->
    <meta name="description" content="Track your movies and TV shows. Keep a record of what you've watched and build your personal watchlist.">
    <meta name="author" content="huger6">
    <meta name="robots" content="follow">
    <meta name="copyright" content="© 2025 huger6">
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='icons/favicon.ico')}}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{url_for('static', filename='icons/favicon-32x32')}}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{url_for('static', filename='icons/favicon-16x16')}}">
    <link rel="icon" type="image/png" sizes="192x192" href="{{url_for('static', filename='icons/android-chrome-192x192')}}">
    <link rel="icon" type="image/png" sizes="512x512" href="{{url_for('static', filename='icons/android-chrome-512x512')}}">
    <link rel="apple-touch-icon" href="{{url_for('static', filename='icons/apple-touch-icon')}}">
    <link rel="manifest" href="{{url_for('static', filename='icons/site.webmanifest')}}">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Winky+Rough:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Winky+Rough:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <!-- Core CSS theme -->
    <link href="{{url_for('static', filename='css/styles.css')}}" rel="stylesheet">
    {% block css %}{% endblock %}
    <script>
        const page = "{{ page }}";
    </script>
    {% block head_scripts %}{% endblock %}
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-md fixed-top">
            <div class="container-fluid d-flex align-items-center px-3 px-lg-4 px-xl-5 flex-grow-1 gap-3 gap-md-4 gap-xl-5">
                <!-- Brand -->
                <a class="navbar-brand d-flex align-items-center" href="{{url_for('main.home')}}">
                    <img src="{{url_for('static', filename='img/logo/logo.jpeg')}}" alt="Filseries Logo" loading="eager" class="brand-logo">
                </a>
                <!-- Search bar -->
                <div class="search-container flex-grow-1">
                    <button type="button" class="search-toggle-btn" aria-label="Open search">
                        <i class="fas fa-search"></i>
                    </button>
                    <form method="get" action="{{url_for('titles.search')}}" class="search-form">
                        <!-- Filter Button -->
                        <div class="navbar-filter-wrapper">
                            <button type="button" class="navbar-filter-btn" id="navbarFilterBtn" aria-label="Toggle filters">
                                <i class="bi bi-sliders"></i>
                            </button>
                            <!-- Filter Dropdown -->
                            <div class="navbar-filter-dropdown" id="navbarFilterDropdown">
                                <div class="filter-header">
                                    <h6><i class="bi bi-sliders"></i> Search Filters</h6>
                                    <button type="button" class="filter-reset-btn" id="navbarResetFilters">
                                        <i class="bi bi-arrow-counterclockwise"></i> Reset
                                    </button>
                                </div>
                                
                                <!-- Quick Filters -->
                                <div class="filter-section">
                                    <label class="filter-section-label">Quick Filters</label>
                                    <div class="quick-filters">
                                        <button type="button" class="quick-filter-btn active" data-filter="relevant">
                                            <i class="bi bi-fire"></i> Relevant Only
                                        </button>
                                        <button type="button" class="quick-filter-btn" data-filter="all">
                                            <i class="bi bi-grid-3x3-gap"></i> All Titles
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Media Type Filter -->
                                <div class="filter-section">
                                    <label class="filter-section-label">Type</label>
                                    <div class="media-type-filters">
                                        <button type="button" class="media-type-btn active" data-type="all">
                                            <i class="bi bi-collection"></i> All
                                        </button>
                                        <button type="button" class="media-type-btn" data-type="movie">
                                            <i class="bi bi-film"></i> Movies
                                        </button>
                                        <button type="button" class="media-type-btn" data-type="tv">
                                            <i class="bi bi-tv"></i> Series
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Sort Options -->
                                <div class="filter-section">
                                    <label class="filter-section-label">Sort By</label>
                                    <div class="sort-options">
                                        <button type="button" class="sort-btn active" data-sort="popularity" data-order="desc">
                                            <i class="bi bi-graph-up"></i> Popular
                                        </button>
                                        <button type="button" class="sort-btn" data-sort="vote_average" data-order="desc">
                                            <i class="bi bi-star-fill"></i> Rating ↓
                                        </button>
                                        <button type="button" class="sort-btn" data-sort="vote_average" data-order="asc">
                                            <i class="bi bi-star"></i> Rating ↑
                                        </button>
                                        <button type="button" class="sort-btn" data-sort="title" data-order="asc">
                                            <i class="bi bi-sort-alpha-down"></i> A-Z
                                        </button>
                                        <button type="button" class="sort-btn" data-sort="title" data-order="desc">
                                            <i class="bi bi-sort-alpha-up"></i> Z-A
                                        </button>
                                        <button type="button" class="sort-btn" data-sort="release_date" data-order="desc">
                                            <i class="bi bi-calendar-event"></i> Newest
                                        </button>
                                        <button type="button" class="sort-btn" data-sort="release_date" data-order="asc">
                                            <i class="bi bi-calendar"></i> Oldest
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Genre Filter -->
                                <div class="filter-section">
                                    <label class="filter-section-label">Genres</label>
                                    <div class="genre-filters">
                                        <button type="button" class="genre-btn active" data-genre="all">All</button>
                                        <button type="button" class="genre-btn" data-genre="28">Action</button>
                                        <button type="button" class="genre-btn" data-genre="12">Adventure</button>
                                        <button type="button" class="genre-btn" data-genre="16">Animation</button>
                                        <button type="button" class="genre-btn" data-genre="35">Comedy</button>
                                        <button type="button" class="genre-btn" data-genre="80">Crime</button>
                                        <button type="button" class="genre-btn" data-genre="99">Documentary</button>
                                        <button type="button" class="genre-btn" data-genre="18">Drama</button>
                                        <button type="button" class="genre-btn" data-genre="10751">Family</button>
                                        <button type="button" class="genre-btn" data-genre="14">Fantasy</button>
                                        <button type="button" class="genre-btn" data-genre="36">History</button>
                                        <button type="button" class="genre-btn" data-genre="27">Horror</button>
                                        <button type="button" class="genre-btn" data-genre="10402">Music</button>
                                        <button type="button" class="genre-btn" data-genre="9648">Mystery</button>
                                        <button type="button" class="genre-btn" data-genre="10749">Romance</button>
                                        <button type="button" class="genre-btn" data-genre="878">Sci-Fi</button>
                                        <button type="button" class="genre-btn" data-genre="53">Thriller</button>
                                        <button type="button" class="genre-btn" data-genre="10752">War</button>
                                        <button type="button" class="genre-btn" data-genre="37">Western</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <input class="form-control search-input" type="text" name="title" placeholder="Search movies & TV shows..." minlength="3" maxlength="100" required>
                        <span class="search-error-tooltip">Please enter at least 3 characters</span>
                        <button type="submit" class="search-btn"><i class="fas fa-search"></i></button>
                    </form>
                </div>
                <!-- Search overlay for small screens -->
                <div class="search-overlay">
                    <form method="get" action="{{url_for('titles.search')}}" class="search-overlay-form">
                        <i class="fas fa-search search-overlay-icon"></i>
                        <input class="form-control search-overlay-input" type="text" name="title" placeholder="Search..." autocomplete="off" minlength="3" maxlength="100" required>
                        <button type="button" class="search-overlay-close" aria-label="Close search">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </form>
                </div>
                <div class="d-flex align-items-center gap-2 gap-xl-3">
                    <!-- Desktop Navigation -->
                    <ul class="navbar-nav d-none d-md-flex flex-row align-items-center gap-1 gap-xl-2">
                        <li class="nav-item">
                            <a class="nav-link {% if page == 'home' %}nav-link-active{% endif %}" href="{{url_for('main.home')}}">
                                <span>Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if page == 'watchlist' %}nav-link-active{% endif %}" href="{{url_for('watchlist.watchlist')}}">
                                <span>Watchlist</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if page == 'watched' %}nav-link-active{% endif %}" href="{{url_for('watched.watched')}}">
                                <span>Watched</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if page == 'about' %}nav-link-active{% endif %}" href="{{url_for('main.about')}}">
                                <span>About</span>
                            </a>
                        </li>
                    </ul>
                    <!-- User Area -->
                    {% if current_user.is_authenticated %}
                    <div class="notification-wrapper">
                        <button class="notification-btn" type="button" title="Notifications" aria-label="Toggle notifications">
                            <i class="bi bi-bell"></i>
                            <span class="notification-badge d-none"></span>
                        </button>
                        <div class="notification-dropdown">
                            <div class="notification-header">
                                <h6>Notifications</h6>
                                <div class="notification-tabs">
                                    <button class="notification-tab active" data-filter="new">New</button>
                                    <button class="notification-tab" data-filter="all">All</button>
                                </div>
                            </div>
                            <div class="notification-list">
                                <div class="notification-empty">
                                    <i class="bi bi-bell-slash"></i>
                                    <p>No notifications recently</p>
                                </div>
                                <!-- Notifications will be dynamically inserted here -->
                            </div>
                        </div>
                    </div>
                    <a class="user-btn" href="{{url_for('auth.user')}}" title="My Account">
                        {% if has_pfp %}
                        <img src="{{url_for('auth.get_profile_picture')}}" alt="Profile" class="navbar-pfp">
                        {% else %}
                        <i class="bi bi-person-circle"></i>
                        {% endif %}
                    </a>
                    {% else %}
                    <a class="login-btn d-none d-md-flex" href="{{url_for('auth.login')}}">
                        <span>Login</span>
                    </a>
                    {% endif %}
                    <!-- Hamburger button -->
                    <button class="navbar-toggler d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                        <span class="toggler-icon toggler-icon-top"></span>
                        <span class="toggler-icon toggler-icon-middle"></span>
                        <span class="toggler-icon toggler-icon-bottom"></span>
                    </button>
                </div>
            </div>
        </nav>
        <!-- Mobile Menu (moved outside container-fluid for proper behavior) -->
        <div class="offcanvas offcanvas-end d-md-none" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header d-flex justify-content-between">
                <a href="{{url_for('main.home')}}" class="offcanvas-brand">
                    <img src="{{url_for('static', filename='img/logo/logo.jpeg')}}" alt="Filseries Logo" loading="lazy">
                    <span>Filseries</span>
                </a>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link {% if page == 'home' %}nav-link-active{% endif %}" href="{{url_for('main.home')}}">
                            Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if page == 'watchlist' %}nav-link-active{% endif %}" href="{{url_for('watchlist.watchlist')}}">
                            Watchlist
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if page == 'watched' %}nav-link-active{% endif %}" href="{{url_for('watched.watched')}}">
                            Watched
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if page == 'about' %}nav-link-active{% endif %}" href="{{url_for('main.about')}}">
                            About
                        </a>
                    </li>
                    {% if current_user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            Notifications
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if page == 'user' %}nav-link-active{% endif %}" href="{{url_for('auth.user')}}">
                            My Account
                        </a>
                    </li>
                    {% else %}
                    <li class="nav-item mt-3">
                        <a class="mobile-login-btn" href="{{url_for('auth.login')}}">
                            Login
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="mobile-register-btn" href="{{url_for('auth.register')}}">
                            Register
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </header>
    <main>
        <!-- Alerts -->
        {% with alerts = get_flashed_messages(with_categories=True) %}
            {% if alerts %}
                <div class="alerts-container">
                    {% for category, alert in alerts %}
                        <div class="alert alert-{{ category }} alert-dismissable fade show" role="alert">
                            <div class="alert-content">
                                <i class="bi {% if category == 'error' %}bi-exclamation-circle{% elif category == 'success' %}bi-check-circle{% else %}bi-info-circle{% endif %}"></i>
                                {{ alert }}
                            </div>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        <!-- Content -->
        {% block main %}{% endblock %}
    </main>
    <footer>
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-brand">
                    <a href="{{url_for('main.home')}}" class="footer-logo">
                        <img src="{{url_for('static', filename='img/logo/logo.jpeg')}}" alt="Filseries Logo">
                        <span>Filseries</span>
                    </a>
                    <p class="footer-tagline">Track your entertainment journey</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h5>Navigation</h5>
                        <a href="{{url_for('main.home')}}">Home</a>
                        <a href="{{url_for('watchlist.watchlist')}}">Watchlist</a>
                        <a href="{{url_for('watched.watched')}}">Watched</a>
                        <a href="{{url_for('main.about')}}">About</a>
                    </div>
                    <div class="footer-column">
                        <h5>Legal</h5>
                        <a href="{{url_for('main.privacy')}}">Privacy Policy</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Copyright &copy; Filseries 2025</p>
                <p>Made by <a href="https://github.com/huger6" target="_blank">huger6</a></p>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{url_for('static', filename='js/script.js')}}"></script>
    {% block js %}{% endblock %}
</body>
</html> 